<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
<button onclick = "myStop()"> Stopthetimer </button> 
<p id="demo"></p>  


<script>
  const posts=[
    {title:'Post One',body:'This is post one',createdAt:Date.now()/1000},
    {title:'Post Two',body:'This is post Two',createdAt:Date.now()/1000}
];

// function getPost(){
//     setTimeout(() => {
//       let output='';
//       posts.forEach((post,index) => {
//         output+=`<li>${post.title} created `+(Date.now()/1000 - post.createdAt)+`ago</li>`;
//       });
//       document.body.innerHTML = output;
//     },8000);
// }
//getPost();

var intervalId;

function getPost(){
  //clearInterval(intervalId);
  intervalId=setInterval(() => {
    let output='';
    for(let i=0;i<posts.length;i++){
      let x=(Date.now()/1000 - posts[i].createdAt);
      output+=`<li>${posts[i].title} created ${x} seconds ago</li>`;
    }
    document.getElementById("demo").innerHTML = output;
  }, 1000);
  console.log(intervalId);
  //clearInterval(intervalId);
}


function myStop(){
  clearInterval(intervalId);
}

function createPost(post,callback){
    setTimeout(() => {
      posts.push(post);
      callback();
    },2000);
  }
 createPost({title:'Post Three',Body:'This is post three',createdAt:Date.now()/1000},getPost);

  // function create4thPost(post,callback){
  //   setTimeout(() => {
  //     posts.push(post);
  //     callback();
  //   },6000);
  // }
  //createPost({title:'Post Four',Body:'This is post four',createdAt:Date.now()/1000},getPost);

</script>
</body>
</html>







